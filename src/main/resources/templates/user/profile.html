<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
	<!-- Must go here due to a bug with putting fragments in head. -->
	<link rel="icon" type="image/x-icon" href="img/icon.ico"></link>
	
	<!-- Page-specific CSS / JS -->
	<link rel="stylesheet" type="text/css" th:href="@{/css/profile.css}"></link>
</head>
<section th:replace="fragments/theme/head :: head(Profile)"></section>
<body>
	<section th:replace="fragments/theme/nav(Profile)"></section>

	<div class="single">
		<div class="container">
		
			<div class="w3_single_grid">
				<div class="col-md-6 w3_single_grid_left">
					<div class="w3_single_grid_left_grid">
						<div class="wthree_element_grids">
		
							<div class="col-md-6 wthree_element_grid">
								<div class="wthree_element_grid1">
									<!-- Character Portrait -->
									<div class="hover14 column">
										
										<div th:switch="${character}"> 
											<section th:case="${null}" th:replace="fragments/ui/user/character_portrait('img/portraits/unknown.png')"></section>
											<section th:case="*" th:replace="fragments/ui/user/character_portrait(${character.image})"></section> 
										</div>
										
										
									</div>
									
									<!-- Character Class -->
									<div class="wthree_element_grid1_pos">
										
										<div th:switch="${character}"> 
											<h4 th:case="${null}"><span>Adventurer</span></h4>
											<h4 th:case="*"><span th:text="${character.charClass.name}"></span></h4> 
										</div>
										
									</div>
											
									<!-- Edit Buttons -->
									<div th:switch="${editMode}"> 
										<div th:case="true" class="wthree_element_grid2">
											<form id="editForm" method="post" th:action="@{/editProfile}">
												<h1>
													<button id="editBtn" type="submit" class="label label-default">Edit</button>
												</h1>
											</form>
										</div>
										
										<div th:case="*" class="wthree_element_grid2">
											<script>
												 function postForm(){
												 	$('#saveForm').submit();
												 }
											 </script>
											<h1>
												<button id="saveBtn" onclick="postForm();" class="label label-default">Save</button>
											</h1>
											
											<form id="cancelForm" method="get" th:action="@{/profile}">
												<h1>
													<button id="cancelBtn" type="submit" class="label label-default">Cancel</button>
												</h1>
											</form>
										</div> 
									</div>
								</div>
							</div>
										
							<div class="col-md-6 wthree_element_grid">
								<!-- Character Info -->
								<div class="col-md-12">
									<form th:if="${editMode == true}" id="saveForm" method="post" th:action="@{/profile}" th:object="${characterValidator}">
										<div class="row">
											<input th:field="*{name}" placeholder="Character Name" class="long-input" />
										</div>
										
										<div class="row lower">
											<select th:field="*{classId}" class="long-input">
												<option value="0">Select Class</option>
												<option value="1">Barbarian</option>
												<option value="2">Bard</option>
											</select>
										</div>
									</form>
								</div>
								
								<div th:if="${editMode == false}">
									<script>
										$('input').each(function() {
										   $(this).attr('disabled', 'disabled');
										});
										
										$('select').each(function() {
										   $(this).attr('disabled', 'disabled');
										});
									</script>
									
								</div>
							</div>
	
							<div class="clearfix"></div>
						</div>
					</div>
				</div>
			</div>
			
			<div th:if="${editMode == true}">
				<section th:replace="fragments/ui/user/choose_portrait"></section>
			</div>
		</div>
	</div>
	
</body>
</html>